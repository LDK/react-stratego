{"version":3,"sources":["Home.js","Game.js","App.js","reportWebVitals.js","index.js"],"names":["Home","props","useOktaAuth","authState","oktaAuth","app","userInfo","setUserInfo","unregistered","setUnregistered","checkAuth","useEffect","login","signInWithRedirect","originalUri","LoginButton","isAuthenticated","onClick","userText","gamesList","username","signOut","recent_games","map","game","href","id","title","className","Game","game_id","useParams","AuthDomain","config","clientId","issuer","discoveryUri","redirectUri","endSessionRedirectUri","scopes","requireHardwareBackedKeyStore","pkce","OktaAuth","toRelativeUrl","window","location","origin","setOriginalUri","App","useState","args","token","getUserInfo","then","info","requestOptions","method","headers","body","JSON","stringify","userKey","sub","email","fetch","response","json","data","user_id","key","invite_available","random_available","recentGames","active_games","activeGames","to","restoreOriginalUri","exact","path","component","LoginCallback","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eeae3f40.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useOktaAuth } from '@okta/okta-react';\nimport PropTypes from \"prop-types\";\n\nexport function Home(props) {\n\tconst { authState, oktaAuth } = useOktaAuth();\n    const { userInfo, setUserInfo, unregistered, setUnregistered, checkAuth } = props.app;\n\n\tuseEffect(() => checkAuth({\n\t\tauthState: authState,\n\t\toktaAuth: oktaAuth,\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tsetUnregistered: setUnregistered\n\t}), [authState, oktaAuth]); // Update if authState changes\n\n\tif (!authState) {\n\t\treturn (\n\t\t\t<div>Loading authentication...</div>\n\t\t);\n\t}\n\n\tconst login = () => oktaAuth.signInWithRedirect({originalUri: '/'});\n\tconst LoginButton = () => {\n\t\tif (!authState.isAuthenticated) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={login}>Login</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst logout = () => { oktaAuth.signOut(); }\n\tlet userText = '';\n\tlet gamesList = '';\n\tif (authState.isAuthenticated) {\n\t\tif (unregistered) {\n\t\t\tuserText = (<div><p>If you are seeing this, I should really open a modal to create your profile, new user.</p></div>);\n\t\t}\n\t\telse if (userInfo) {\n\t\t\tuserText = (<div><p>Welcome, {userInfo.username}!</p><button onClick={ logout }>Logout</button></div>);\n\t\t\tif (userInfo.recent_games) {\n\t\t\t\tgamesList = (<ul>\n\t\t\t\t\t(\n\t\t\t\t\t\t{userInfo.recent_games.map(game => <li key=\"game-{game.id}\"><a href={\"/game/\" + game.id}>{game.title}</a></li>)}\n\t\t\t\t\t)\n\t\t\t\t\t</ul>);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tuserText = (<div><p>Loading user info...</p></div>);\n\t\t}\n\t}\n\telse {\n\t\tuserText = (<div><p>You need to sign in to use the application!</p><LoginButton /></div>);\n\t}\n\t\n\treturn (<div className=\"page-home\"><h1>Welcome to Stratego</h1>{ userText }{ gamesList }</div>);\n}\n\nHome.propTypes = {\n  app: PropTypes.object\n};","import React, { useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useOktaAuth } from '@okta/okta-react';\nimport PropTypes from \"prop-types\";\n\nexport function Game(props) {\n\tconst { game_id } = useParams();\n\tconst { authState, oktaAuth } = useOktaAuth();\n    const { userInfo, setUserInfo, unregistered, setUnregistered, checkAuth } = props.app;\n\n\tuseEffect(() => checkAuth({\n\t\tauthState: authState,\n\t\toktaAuth: oktaAuth,\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tsetUnregistered: setUnregistered\n\t}), [authState, oktaAuth]); // Update if authState changes\n\n\tif (!authState) {\n\t\treturn (\n\t\t\t<div>Loading authentication...</div>\n\t\t);\n\t}\n\n\tif (authState.isAuthenticated) {\n\t\tif (unregistered) {\n\t\t\treturn (<div><p>If you are seeing this, I should really open a modal to create your profile, new user.</p></div>);\n\t\t}\n\t\telse if (userInfo) {\n\t\t\treturn (<div className=\"game-wrapper\">Game: { game_id }.  You are { userInfo.username }.</div>);\n\t\t}\n\t\telse {\n\t\t\treturn (<div><p>Loading...</p></div>);\n\t\t}\n\t}\n\telse {\n\t\treturn (<div><p>You need to sign in to use the application!</p></div>);\n\t}\n\n}\n\nGame.propTypes = {\n  app: PropTypes.object\n};","import './App.scss';\nimport React, { useState } from 'react';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport { LoginCallback, Security } from '@okta/okta-react';\nimport { OktaAuth } from '@okta/okta-auth-js';\nimport { Home } from './Home';\nimport { Game } from './Game';\nimport { toRelativeUrl } from '@okta/okta-auth-js';\n\nconst ClientId = '0oa2t6lqn7Qsg1T3g5d7';\nconst AuthDomain = 'dev-6379228.okta.com';\n\nconst config = {\n  clientId: `${ClientId}`,\n  issuer: `https://${AuthDomain}/oauth2/default`,\n  discoveryUri: `https://${AuthDomain}/oauth2/default`,\n  redirectUri: 'http://localhost:3000/login-callback',\n  endSessionRedirectUri: 'http://localhost:3000/logout',\n  scopes: ['openid', 'profile', 'email'],\n  requireHardwareBackedKeyStore: false,\n  pkce: true\n};\n\nconst oktaAuth = new OktaAuth(config);\nconst originalUri = toRelativeUrl(window.location.href, window.location.origin);\noktaAuth.setOriginalUri(originalUri);\n\nfunction App() {\n    const [ userInfo, setUserInfo ] = useState(null);\n    const [ unregistered, setUnregistered ] = useState(false);\n\tconst restoreOriginalUri = () => {\n\t\twindow.location='/';\n\t};\n\tconst checkAuth = (args) => {\n\t\tconst { authState, oktaAuth, userInfo, setUserInfo, setUnregistered } = args;\n\t\tif (!authState || !authState.isAuthenticated) {\n\t\t\t// When user isn't authenticated, forget any user info\n\t\t\tsetUserInfo(null);\n\t\t} else {\n\t\t\tif (!userInfo || !userInfo.username) {\n\t\t\t\toktaAuth.token.getUserInfo().then(info => {\n\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\tbody: JSON.stringify({ userKey: info.sub, email: info.email })\n\t\t\t\t\t};\n\t\t\t\t\tfetch('http://localhost:3002/login', requestOptions)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\tsetUserInfo({\n\t\t\t\t\t\t\t\temail: data.email,\n\t\t\t\t\t\t\t\tid: data.user_id,\n\t\t\t\t\t\t\t\tkey: info.sub,\n\t\t\t\t\t\t\t\tinvite_available: data.invite_available,\n\t\t\t\t\t\t\t\trandom_available: data.random_available,\n\t\t\t\t\t\t\t\tusername: data.username,\n\t\t\t\t\t\t\t\trecent_games: data.recentGames,\n\t\t\t\t\t\t\t\tactive_games: data.activeGames\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetUnregistered(!data.user_id);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\tconst app = {\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tunregistered: unregistered,\n\t\tsetUnregistered: setUnregistered,\n\t\tcheckAuth: checkAuth\n\t};\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Router>\n\t\t\t\t<header>\n\t\t\t\t\t<div>Stratego</div>\n\t\t\t\t\t<ul className=\"menu\"><li><Link to=\"/\">Home</Link></li></ul>\n\t\t\t\t</header>\n\t\t\t\t<Security oktaAuth={oktaAuth} restoreOriginalUri={restoreOriginalUri}>\n\t\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t\t<Home app={app} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path='/game/:game_id'>\n\t\t\t\t\t\t<Game app={app} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path='/login-callback' component={LoginCallback}/>\n\t\t\t\t</Security>\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}