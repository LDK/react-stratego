{"version":3,"sources":["Home.js","Game.js","App.js","reportWebVitals.js","index.js"],"names":["Home","props","useOktaAuth","authState","oktaAuth","app","userInfo","setUserInfo","unregistered","setUnregistered","checkAuth","useEffect","login","signInWithRedirect","originalUri","LoginButton","isAuthenticated","onClick","userText","recentGames","activeGames","GamesList","list","listId","header","id","map","game","href","title","username","signOut","recent_games","active_games","className","Game","game_id","useParams","useState","loaded","setLoaded","turn","setTurn","color","setColor","opponent","setOpponent","redPlayer","setRedPlayer","bluePlayer","setBluePlayer","requestOptions","method","headers","body","JSON","stringify","userKey","key","user_id","fetch","then","response","json","data","starter_uid","opponent_name","starter_name","fetchGame","turnLabel","AuthDomain","config","clientId","issuer","discoveryUri","redirectUri","endSessionRedirectUri","scopes","requireHardwareBackedKeyStore","pkce","OktaAuth","toRelativeUrl","window","location","origin","setOriginalUri","App","args","token","getUserInfo","info","sub","email","invite_available","random_available","to","restoreOriginalUri","exact","path","component","LoginCallback","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.65217e18.chunk.js","sourcesContent":["import React, { useEffect } from \"react\";\nimport { useOktaAuth } from '@okta/okta-react';\nimport PropTypes from \"prop-types\";\n\nexport function Home(props) {\n\tconst { authState, oktaAuth } = useOktaAuth();\n    const { userInfo, setUserInfo, unregistered, setUnregistered, checkAuth } = props.app;\n\n\tuseEffect(() => checkAuth({\n\t\tauthState: authState,\n\t\toktaAuth: oktaAuth,\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tsetUnregistered: setUnregistered\n\t}), [authState, oktaAuth]); // Update if authState changes\n\n\tif (!authState) {\n\t\treturn (\n\t\t\t<div>Loading authentication...</div>\n\t\t);\n\t}\n\n\tconst login = () => oktaAuth.signInWithRedirect({originalUri: '/'});\n\tconst LoginButton = () => {\n\t\tif (!authState.isAuthenticated) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={login}>Login</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst logout = () => { oktaAuth.signOut(); }\n\tlet userText = '';\n\tlet recentGames = '';\n\tlet activeGames = '';\n\tconst GamesList = (list, listId, header) => {\n\t\treturn (\n\t\t\t<div id={listId}>\n\t\t\t\t<h3>{ header }</h3>\n\t\t\t\t<ul>\n\t\t\t\t\t{list.map(game => <li key={`game-${listId}-${game.id}`}><a href={\"/game/\" + game.id}>{ game.title }</a></li>)}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t);\n\t}\n\tif (authState.isAuthenticated) {\n\t\tif (unregistered) {\n\t\t\tuserText = (<div><p>If you are seeing this, I should really open a modal to create your profile, new user.</p></div>);\n\t\t}\n\t\telse if (userInfo) {\n\t\t\tuserText = (<div><p>Welcome, {userInfo.username}!</p><button onClick={ logout }>Logout</button></div>);\n\t\t\tif (userInfo.recent_games) {\n\t\t\t\trecentGames = GamesList(userInfo.recent_games, 'recent-games', 'Recent Games');\n\t\t\t}\n\t\t\tif (userInfo.active_games) {\n\t\t\t\tactiveGames = GamesList(userInfo.active_games, 'active-games', 'Active Games');\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tuserText = (<div><p>Loading user info...</p></div>);\n\t\t}\n\t}\n\telse {\n\t\tuserText = (<div><p>You need to sign in to use the application!</p><LoginButton /></div>);\n\t}\n\t\n\treturn (<div className=\"page-home\"><h1>Welcome to Stratego</h1>{ userText }{ activeGames }{ recentGames }</div>);\n}\n\nHome.propTypes = {\n  app: PropTypes.object\n};","import React, { useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { useOktaAuth } from '@okta/okta-react';\nimport PropTypes from \"prop-types\";\n\nexport function Game(props) {\n\tconst { game_id } = useParams();\n\tconst { authState, oktaAuth } = useOktaAuth();\n    const { userInfo, setUserInfo, unregistered, setUnregistered, checkAuth } = props.app;\n\tconst [ loaded, setLoaded ] = useState(false);\n\tconst [ turn, setTurn ] = useState(null);\n\tconst [ color, setColor ] = useState(null);\n\tconst [ opponent, setOpponent ] = useState(null);\n\tconst [ redPlayer, setRedPlayer ] = useState(null);\n\tconst [ bluePlayer, setBluePlayer ] = useState(null);\n\n\tconst fetchGame = (id, userInfo) => {\n\t\tif (loaded) {\n\t\t\treturn;\n\t\t}\n\t\tconst requestOptions = {\n\t\t\tmethod: 'POST',\n\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\tbody: JSON.stringify({ id: id, userKey: userInfo.key, user_id: userInfo.id })\n\t\t};\n\t\tfetch('http://localhost:3002/game', requestOptions)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\tsetLoaded(true);\n\t\t\t\tsetTurn(data.turn);\n\t\t\t\tsetColor(data.starter_uid == userInfo.id ? 'blue' : 'red');\n\t\t\t\tsetOpponent(data.starter_uid == userInfo.id ? data.opponent_name : data.starter_name);\n\t\t\t\tsetBluePlayer(data.starter_name);\n\t\t\t\tsetRedPlayer(data.opponent_name);\n\t\t});\n\t}\n\n\tuseEffect(() => checkAuth({\n\t\tauthState: authState,\n\t\toktaAuth: oktaAuth,\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tsetUnregistered: setUnregistered\n\t}), [authState, oktaAuth]); // Update if authState changes\n\n\tif (!authState) {\n\t\treturn (\n\t\t\t<div>Loading authentication...</div>\n\t\t);\n\t}\n\n\tif (authState.isAuthenticated) {\n\t\tif (unregistered) {\n\t\t\treturn (<div><p>If you are seeing this, I should really open a modal to create your profile, new user.</p></div>);\n\t\t}\n\t\telse if (userInfo) {\n\t\t\tif (!loaded) {\n\t\t\t\tfetchGame(game_id, userInfo);\n\t\t\t}\n\t\t\tlet turnLabel = '';\n\t\t\tif (turn) {\n\t\t\t\tturnLabel = (<p>{ turn == 'red' ? redPlayer : bluePlayer }&apos;s turn.</p>);\n\t\t\t}\n\t\t\treturn (<div className=\"game-wrapper\">\n\t\t\t\tGame: { game_id }.\n\t\t\t\tYou are { userInfo.username }.\n\t\t\t\tYou use { color } tiles.\n\t\t\t\tYour opponent is { opponent }.\n\t\t\t\t{ turnLabel }\n\t\t\t\t</div>);\n\t\t}\n\t\telse {\n\t\t\treturn (<div><p>Loading...</p></div>);\n\t\t}\n\t}\n\telse {\n\t\treturn (<div><p>You need to sign in to use the application!</p></div>);\n\t}\n\n}\n\nGame.propTypes = {\n  app: PropTypes.object\n};","import './App.scss';\nimport React, { useState } from 'react';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport { LoginCallback, Security } from '@okta/okta-react';\nimport { OktaAuth } from '@okta/okta-auth-js';\nimport { Home } from './Home';\nimport { Game } from './Game';\nimport { toRelativeUrl } from '@okta/okta-auth-js';\n\nconst ClientId = '0oa2t6lqn7Qsg1T3g5d7';\nconst AuthDomain = 'dev-6379228.okta.com';\n\nconst config = {\n  clientId: `${ClientId}`,\n  issuer: `https://${AuthDomain}/oauth2/default`,\n  discoveryUri: `https://${AuthDomain}/oauth2/default`,\n  redirectUri: 'http://localhost:3000/login-callback',\n  endSessionRedirectUri: 'http://localhost:3000/logout',\n  scopes: ['openid', 'profile', 'email'],\n  requireHardwareBackedKeyStore: false,\n  pkce: true\n};\n\nconst oktaAuth = new OktaAuth(config);\nconst originalUri = toRelativeUrl(window.location.href, window.location.origin);\noktaAuth.setOriginalUri(originalUri);\n\nfunction App() {\n    const [ userInfo, setUserInfo ] = useState(null);\n    const [ unregistered, setUnregistered ] = useState(false);\n\tconst restoreOriginalUri = () => {\n\t\twindow.location='/';\n\t};\n\tconst checkAuth = (args) => {\n\t\tconst { authState, oktaAuth, userInfo, setUserInfo, setUnregistered } = args;\n\t\tif (!authState || !authState.isAuthenticated) {\n\t\t\t// When user isn't authenticated, forget any user info\n\t\t\tsetUserInfo(null);\n\t\t} else {\n\t\t\tif (!userInfo || !userInfo.username) {\n\t\t\t\toktaAuth.token.getUserInfo().then(info => {\n\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\tbody: JSON.stringify({ userKey: info.sub, email: info.email })\n\t\t\t\t\t};\n\t\t\t\t\tfetch('http://localhost:3002/login', requestOptions)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\tsetUserInfo({\n\t\t\t\t\t\t\t\temail: data.email,\n\t\t\t\t\t\t\t\tid: data.user_id,\n\t\t\t\t\t\t\t\tkey: info.sub,\n\t\t\t\t\t\t\t\tinvite_available: data.invite_available,\n\t\t\t\t\t\t\t\trandom_available: data.random_available,\n\t\t\t\t\t\t\t\tusername: data.username,\n\t\t\t\t\t\t\t\trecent_games: data.recentGames,\n\t\t\t\t\t\t\t\tactive_games: data.activeGames\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetUnregistered(!data.user_id);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n\tconst app = {\n\t\tuserInfo: userInfo,\n\t\tsetUserInfo: setUserInfo,\n\t\tunregistered: unregistered,\n\t\tsetUnregistered: setUnregistered,\n\t\tcheckAuth: checkAuth\n\t};\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Router>\n\t\t\t\t<header>\n\t\t\t\t\t<div>Stratego</div>\n\t\t\t\t\t<ul className=\"menu\"><li><Link to=\"/\">Home</Link></li></ul>\n\t\t\t\t</header>\n\t\t\t\t<Security oktaAuth={oktaAuth} restoreOriginalUri={restoreOriginalUri}>\n\t\t\t\t\t<Route exact path='/'>\n\t\t\t\t\t\t<Home app={app} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path='/game/:game_id'>\n\t\t\t\t\t\t<Game app={app} />\n\t\t\t\t\t</Route>\n\t\t\t\t\t<Route path='/login-callback' component={LoginCallback}/>\n\t\t\t\t</Security>\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}