(self.webpackChunkreact_stratego=self.webpackChunkreact_stratego||[]).push([[540,27],{2068:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>M});var o=n(7294),r=n(5697),i=n.n(r),a=n(5181),s=n(7540),c=n(5975);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,n,r,a,l,m=(a=y,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(a);if(l){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(t=m.call(this,e)).state={formOpen:!1,userInput:"",passInput:"",pass2Input:"",emailInput:""},t.id="registration-modal",t.sendRegistration=t.sendRegistration.bind(h(t)),t.updateUserInput=t.updateUserInput.bind(h(t)),t.updatePassInput=t.updatePassInput.bind(h(t)),t.updatePass2Input=t.updatePass2Input.bind(h(t)),t.updateEmailInput=t.updateEmailInput.bind(h(t)),e.app.RegistrationMenu=h(t),t}return t=y,r=[{key:"propTypes",get:function(){return{app:i().object}}}],(n=[{key:"updateUserInput",value:function(e){this.setState({userInput:e.target.value})}},{key:"updateEmailInput",value:function(e){this.setState({emailInput:e.target.value})}},{key:"updatePassInput",value:function(e){this.setState({passInput:e.target.value})}},{key:"updatePass2Input",value:function(e){this.setState({pass2Input:e.target.value})}},{key:"sendRegistration",value:function(e){e.preventDefault();var t=this.props.app,n=this;if(this.state.passInput&&this.state.passInput==this.state.pass2Input){var o={username:this.state.userInput,email:this.state.emailInput,password:this.state.passInput};window.fetch(t.gameServer+"register",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(o)}).then((function(e){e.text().then((function(e){var o=JSON.parse(e);o.error||(n.setState({formOpen:!1}),o.user_id=o.id,t.setCurrentUser(o))}))})).catch((function(e){(0,c.fF)("Request failed",e)}))}}},{key:"render",value:function(){if(!this.state.formOpen)return null;var e=this.state,t=o.createElement("form",{onSubmit:this.sendRegistration,className:"h-100"},o.createElement("h3",{className:"mt-0"},"USER REGISTRATION"),o.createElement("p",{className:""},"Register for Stratego here!"),o.createElement("input",{type:"text",value:e.userInput,onChange:this.updateUserInput,size:"22",className:"mr-2",name:"username",placeholder:"Username"}),o.createElement("br",null),o.createElement("input",{type:"text",value:e.emailInput,onChange:this.updateEmailInput,size:"22",className:"mr-2",name:"email",placeholder:"E-mail Address"}),o.createElement("br",null),o.createElement("input",{type:"password",value:e.passInput,onChange:this.updatePassInput,name:"password",size:"22",className:"mr-2",placeholder:"Password"}),o.createElement("br",null),o.createElement("input",{type:"password",value:e.pass2Input,onChange:this.updatePass2Input,name:"password2",size:"22",className:"mr-2",placeholder:"Enter Password Again"}),o.createElement("br",null),o.createElement("input",{type:"submit",value:"SIGN UP!",size:"3",className:"go-button text-white float-right",onClick:this.sendRegistration,disabled:!(e.userInput&&e.passInput&&e.pass2Input&&e.emailInput&&e.pass2Input==e.passInput)}));return o.createElement(s.Z,{parentMenu:this,content:t,styles:{backgroundColor:"var(--dark)"},additionalClasses:"text-white"})}}])&&u(t.prototype,n),r&&u(t,r),y}(o.Component);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(l,e);var t,n,r,a,s,c=(a=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(a);if(s){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).svgSource=t.svgSource.bind(w(t)),t.getPaths=t.getPaths.bind(w(t)),t}return t=l,r=[{key:"propTypes",get:function(){return{id:i().string,height:i().string,width:i().string,stroke:i().string,fill:i().string,icon:i().string.isRequired,additionalClasses:i().string,app:i().object.isRequired}}}],(n=[{key:"getPaths",value:function(e){var t=[];for(var n in e){var r=e[n];t.push(o.createElement("path",{key:n,d:r}))}return t}},{key:"svgSource",value:function(e){if(!e||!e.icon||!this.props.app.Config)return null;var t=e.icon,n=this.props.app.Config.Icons?this.props.app.Config.Icons[t]:null;if(!n)return null;var r=e.width||n.width,i=e.height||n.height,a=e.viewBox||n.viewBox,s=this.getPaths(n.paths);delete e.width,delete e.height,delete e.viewBox;var c=o.createElement("g",e,s);return o.createElement("svg",{version:"1.1",id:"icon-"+t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:r,height:i,viewBox:a,xmlSpace:"preserve"},c)}},{key:"render",value:function(){var e={width:this.props.width||null,height:this.props.height||null,stroke:this.props.stroke||null,fill:this.props.fill||null,icon:this.props.icon},t=this.svgSource(e),n=this.props.additionalClasses+" icon-wrapper",r=this.props.id||null;return o.createElement("span",{className:n,id:r},t)}}])&&b(t.prototype,n),r&&b(t,r),l}(o.Component);var E=n(361),S=n.n(E);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(p,e);var t,n,r,s,l,u=(s=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(s);if(l){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=u.call(this,e)).state={userInput:"",passInput:"",notifications:{},userDropdownOpen:!!e.open,newest_notification_ts:null},t.openUserOptions=t.openUserOptions.bind(P(t)),t.toggleUserDropdown=t.toggleUserDropdown.bind(P(t)),t.openUserDropdown=t.openUserDropdown.bind(P(t)),t.closeUserDropdown=t.closeUserDropdown.bind(P(t)),t.markVisibleSeen=t.markVisibleSeen.bind(P(t)),t.processNotifications=t.processNotifications.bind(P(t)),t.notificationAction=t.notificationAction.bind(P(t)),t.notificationButton=t.notificationButton.bind(P(t)),t.close=t.close.bind(P(t)),e.app.UserStatus=P(t),e.app.nav.subItems.UserStatus=P(t),t.getNotifications=t.getNotifications.bind(P(t)),t}return t=p,r=[{key:"propTypes",get:function(){return{app:i().object,open:i().bool,loginCallback:i().func,wrapperClass:i().string}}}],(n=[{key:"componentDidMount",value:function(){this.getNotifications(),this.notificationPoll=setInterval(this.getNotifications,15e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.notificationPoll)}},{key:"close",value:function(){this.closeUserDropdown()}},{key:"markVisibleSeen",value:function(){if(this.state.notifications.unseen){var e=S()(this.state.notifications),t=!1;for(var n in e.notifications){var o=e.notifications[n];o.seen_ts||(t||(t=[]),t.push(o.id),e.unseen--,o.seen_ts=Date.now())}if(t){this.setState({notifications:e});var r=this.props.app,i={user_id:r.state.currentUser.user_id,userKey:r.state.currentUser.userKey,notification_ids:t};window.fetch(r.gameServer+"markSeen",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(i)}).then((function(e){e.text().then((function(e){return JSON.parse(e)}))})).catch((function(e){(0,c.fF)("Request failed",e)}))}}}},{key:"openUserOptions",value:function(){var e=this.props.app;e.nav.closeAll(),e.UserOptions.setState({formOpen:!0})}},{key:"toggleUserDropdown",value:function(){this.state.userDropdownOpen?this.closeUserDropdown():this.openUserDropdown()}},{key:"openUserDropdown",value:function(){this.setState({userDropdownOpen:!0}),this.props.app.nav.setState({dropdownOpen:!0})}},{key:"closeUserDropdown",value:function(){this.markVisibleSeen(),this.setState({userDropdownOpen:!1}),this.props.app.nav.setState({dropdownOpen:!1})}},{key:"getNotifications",value:function(){var e=this.props.app,t=e.state.currentUser.user_id,n=e.state.currentUser.userKey;if(!t||!n)return[];var o=this,r={user_id:t,userKey:n};window.fetch(e.gameServer+"notifications",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){e.text().then((function(e){if(e.length){var t=JSON.parse(e);t.newest_ts>o.state.newest_notification_ts&&o.setState({notifications:t})}}))}))}},{key:"notificationButton",value:function(e){var t=parseInt(e.target.attributes["data-id"].value),n=e.target.attributes["data-type"].value,o=e.target.attributes["data-mode"].value;if(this.props.app.debugNotifications&&(0,c.fF)("notification button",o,n,t),this.notificationRows&&this.notificationLookup[t]){var r=this.notificationLookup[t].data;if(this.props.app.debugNotifications&&(0,c.fF)("notification data",r),"game"==n&&r.game_id)switch(o){case"accept":this.props.app.acceptInvite(r.game_id,r.id);break;case"decline":this.props.app.declineInvite(r.game_id,r.id);break;case"view":this.props.app.loadGame(r.game_id)}else if("user"==n&&r.user_id)switch(o){case"view":this.props.app.openUserProfile(r.user_id)}this.close()}}},{key:"notificationAction",value:function(e){if(this.props.app.debugNotifications&&(0,c.fF)("notification action",e),e.link_type){switch(e.link_type){case"game":case"user":if(!e.game_id)return void this.close();this.props.app.loadGame(e.game_id)}this.close()}else this.close()}},{key:"processNotifications",value:function(){var e=this;if(this.notificationRows=[],this.notificationLookup={},this.state.notifications.notifications)for(var t in this.state.notifications.notifications){var n=this.state.notifications.notifications[t],o=JSON.parse(n.additional);o.id=n.id;var r=n.text;for(var i in o)r=r.replace("[%"+i+"]",o[i]);var a="notification ";a+=n.seen_ts?"seen":"unseen";var s={value:"notification-"+n.id,name:r,className:a,id:n.id,data:o,onSelect:function(){return e.notificationAction(s)}};this.notificationRows.push(s),this.notificationLookup[n.id]=s,"invite-sent"==n.category&&o.game_id?s.buttons=[{action:this.notificationButton,mode:"accept",type:"game",label:"Accept",id:parseInt(n.id)},{action:this.notificationButton,mode:"decline",type:"game",id:parseInt(n.id),label:"Decline"},{action:this.notificationButton,mode:"view",type:"user",label:"User Profile",id:parseInt(n.id)}]:"open-joined"==n.category||"invite-accepted"==n.category?s.buttons=[{action:this.notificationButton,mode:"view",type:"game",id:parseInt(n.id),label:"Open Game"},{action:this.notificationButton,mode:"view",type:"user",id:parseInt(n.id),label:"User Profile"}]:"invite-declined"==n.category&&(s.buttons=[{action:this.notificationButton,mode:"view",type:"user",id:parseInt(n.id),label:"User Profile"}])}}},{key:"render",value:function(){var e=this.props,t=e.app,n=t.state.currentUser?"":"d-none",r=t.state.currentUser.username,i=[{value:"options",name:"User Options",onSelect:this.openUserOptions},{value:"logout",name:"Log out",onSelect:this.logUserOut}],s=null;this.processNotifications(),i=this.notificationRows.concat(i),this.state.notifications.unseen&&(s=o.createElement("span",{className:"notification-counter"},this.state.notifications.unseen));var c=o.createElement("span",{className:"mr-2"},"[",o.createElement("a",{className:"text-white anchor no-underline",onClick:t.openRegistrationMenu},"Register"),"/",o.createElement("a",{className:"text-white anchor no-underline",onClick:t.openLoginMenu},"Login"),"]"),l=o.createElement("span",{className:n,id:"nav-user-menu"},o.createElement("a",{className:"anchor mr-3 md-up",onClick:t.openRulesModal},"Rules"),o.createElement("span",{className:"username mr-2 sm-up"},o.createElement("p",{className:"md-up d-md-inline"},"|Â  "),o.createElement("a",{className:"anchor",onClick:function(){return t.openUserProfile(t.state.currentUser.user_id)}},r)," is playing."),o.createElement("a",{className:"text-white anchor no-underline",onClick:this.toggleUserDropdown,id:"user-anchor"},o.createElement(O,{app:t,icon:"user",fill:"white",stroke:"white",height:"1rem",width:"1rem",id:"user-icon"}),s),o.createElement("div",{id:"user-dropdown-wrapper",className:this.state.userDropdownOpen?"":"d-none"},o.createElement(a.default,{label:null,items:i,view:"list",id:"user-dropdown"})));return o.createElement("div",{className:e.wrapperClass},c,l)}}])&&C(t.prototype,n),r&&C(t,r),p}(o.Component);var U=n(682),x=n(4051);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){return!t||"object"!==D(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(u,e);var t,n,r,s,c,l=(s=u,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(s);if(c){var n=A(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={activeGame:e.app.state.activeGame},t.gameChange=t.gameChange.bind(L(t)),t.goHome=t.goHome.bind(L(t)),t.closeAll=t.closeAll.bind(L(t)),t.subItems={},e.app.nav=L(t),t}return t=u,r=[{key:"propTypes",get:function(){return{app:i().object}}}],(n=[{key:"gameChange",value:function(e){var t=this.props.app;e?t.loadGame(e):t.setState({activeGame:null})}},{key:"goHome",value:function(){var e=this.props.app;e.setState({activeGame:null}),e.gameOpened=!1,e.nav&&e.nav.gameBrowser&&e.nav.gameBrowser.setState({value:null})}},{key:"closeAll",value:function(){for(var e in this.subItems)this.subItems[e].close();this.setState({dropdownOpen:!1})}},{key:"render",value:function(){var e=this.props.app,t="",n=o.createElement("div",{className:"dropdown-overlay"+(this.state.dropdownOpen?" open":""),onMouseEnter:this.closeAll}),r=e.state.games;return r.active&&r.active.length&&(t=o.createElement("div",{className:"col-4 col-lg-3"},o.createElement(a.default,{parentObj:this,refName:"gameBrowser",label:"Game:",labelClass:"mr-2 md-up",emptyOption:"- Select a Game -",items:r.active,view:"select",callback:this.gameChange,id:"gameList",value:this.state.activeGame?this.state.activeGame.props.id:null}))),o.createElement("div",{id:"top-row",className:"md-up"},o.createElement("div",{className:"navigation py-3 py-sm-1 py-md-3 pb-lg-0 pt-lg-2"},o.createElement(U.Z,{fluid:e.isMobile},o.createElement(x.Z,{noGutters:!0},o.createElement("div",{className:"d-inline-block pr-3 pt-1"},o.createElement("a",{className:"anchor no-underline",onClick:this.goHome},o.createElement(O,{app:e,icon:"home",fill:"white",width:"1rem",height:"1rem"}))),t,o.createElement(R,{wrapperClass:"col px-0 text-right",app:e}),o.createElement(m,{app:e})))),n)}}])&&B(t.prototype,n),r&&B(t,r),u}(o.Component)},5181:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var o=n(7294),r=n(5697),i=n.n(r),a=n(361),s=n.n(a);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(m,e);var t,n,r,a,c,d=(a=m,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(a);if(c){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=d.call(this,e)).callback=t.callback.bind(f(t)),t.afterCallback=t.afterCallback.bind(f(t)),t.renderSelect=t.renderSelect.bind(f(t)),t.renderList=t.renderList.bind(f(t)),t.linkList=t.linkList.bind(f(t)),t.state={value:e.value||null,label:e.label||"",items:e.items||[]},e.parentObj&&e.refName?e.parentObj[e.refName]=f(t):e.parentObj&&(e.parentObj.dataBrowser=f(t)),t}return t=m,r=[{key:"propTypes",get:function(){return{value:i().any,id:i().string,view:i().string,label:i().string,labelClass:i().string,className:i().string,items:i().array,links:i().array,parentObj:i().object,refName:i().string,beforeText:i().string,callback:i().func,afterCallback:i().func,afterArgKey:i().any,onSelect:i().func,emptyOption:i().string,deleteEmpty:i().bool,afterLinks:i().array,afterKeys:i().object,afterKeysSep:i().string,afterParentheses:i().bool,beforeLinks:i().bool,hideIfEmpty:i().bool,disabled:i().bool,emptyVal:i().any,additionalClasses:i().string}}}],(n=[{key:"callback",value:function(e){var t;t=e.target.hasAttribute("data-key")?e.target.getAttribute("data-key"):e.target.value,this.setState({value:t}),this.props.callback&&this.props.callback(t),this.render()}},{key:"afterCallback",value:function(){}},{key:"renderSelect",value:function(e,t){var n=this,r=this.callback,i=this.props.items;this.props.emptyOption&&(i=s()(this.props.items)).unshift({id:null,name:this.props.emptyOption});var a=i.map((function(e,t){return o.createElement("option",{key:t,value:e.id||n.props.emptyVal||"",onClick:n.props.onSelect||null},e.name)}));return o.createElement("div",{className:t},o.createElement("label",{className:this.props.labelClass},this.state.label),o.createElement("select",{onChange:r,id:e,value:this.state.value||""},a))}},{key:"linkList",value:function(e,t,n,r){var i=this.props[e].map((function(e,i){return o.createElement("li",{key:i,className:e.className},o.createElement("a",{className:"anchor underline",onClick:function(){return e.action(e.argKey?n[r][e.argKey]:t)}},e.label))}));return o.createElement("div",{className:"d-inline"},"[",o.createElement("ul",{className:"link-list px-1"},i),"]")}},{key:"renderList",value:function(e,t){var n,r=this,i=this.callback,a=this.props.items;if(this.props.deleteEmpty)for(var s in a)a[s].name||delete a[s];if(this.props.afterLinks)n=a.map((function(e,t){return o.createElement("li",{key:t},e.name," ",r.linkList("afterLinks",e.id,a,t))}));else if(this.props.beforeLinks)n=a.map((function(e,t){return o.createElement("li",{key:t},e.name," ",r.linkList("beforeLinks",e.id))}));else if(this.props.beforeText)n=a.map((function(e,t){return o.createElement("li",{key:t},r.props.beforeText," ",e.name)}));else{var c=null;for(var l in n=[],a){var u=a[l];if(u.buttons){var p=u.buttons.map((function(e,t){return o.createElement("li",{key:t,className:"mr-3 py-2"},o.createElement("a",{className:"button","data-type":e.type||"undefined","data-mode":e.mode||"undefined","data-id":e.id||"null",onClick:e.action},e.label))}));c=o.createElement("div",{"data-key":u.id},o.createElement("span",null,u.name),o.createElement("ul",{className:"item-buttons"},p))}else{var f="";if(this.props.afterKeys){var h=this.props.afterKeysSep||",",d=0;for(var m in this.props.afterKeys)u[m]&&(d&&(f+=h+" "),d++,f+=this.props.afterKeys[m].replace("%this%",u[m])+" "),f=f.trim();if(f.length){var y="",b="";this.props.afterParentheses&&(y="(",b=")"),f=" "+y+f+b}}c=o.createElement("a",{onClick:u.onSelect||i,className:"anchor underline","data-key":u.id},u.name),this.props.afterCallback&&(f=o.createElement("a",{className:"anchor",onClick:function(){return r.props.afterCallback(u[r.props.afterArgKey||m])}},f))}n.push(o.createElement("li",{key:l,className:u.className},c,f))}}return o.createElement("div",{className:t,id:this.props.id||null},o.createElement("label",{className:this.props.labelClass},this.state.label),o.createElement("ul",{id:e},n))}},{key:"render",value:function(){var e,t=this.props.view||"list",n="dataBrowser"+(this.props.disabled?" disabled ":" ")+(this.props.className||""),o=this.props.id||"";if(this.props.hideIfEmpty&&(!this.props.items||!this.props.items.length))return null;switch(t){case"select":e=this.renderSelect(o,n);break;case"list":default:e=this.renderList(o,n)}return e}}])&&l(t.prototype,n),r&&l(t,r),m}(o.Component)},7540:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var o=n(7294),r=n(5697),i=n.n(r),a=n(6347);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(m,e);var t,n,r,s,h,d=(s=m,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(s);if(h){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return u(this,e)});function m(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(t=d.call(this,e)).onKeyDown=t.onKeyDown.bind(p(t)),t.closeForm=t.closeForm.bind(p(t)),t}return t=m,r=[{key:"propTypes",get:function(){return{parentMenu:i().object,content:i().any,styles:i().object,height:i().string,width:i().string,additionalClasses:i().string}}}],(n=[{key:"closeForm",value:function(){this.props.parentMenu.closeForm?this.props.parentMenu.closeForm():this.props.parentMenu.setState({formOpen:!1})}},{key:"onKeyDown",value:function(e){if(e.keyCode)switch(e.keyCode){case this.props.parentMenu.props.app.Config.KeyCodes.esc:this.closeForm()}}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.parentMenu.props.app,r={};return e.styles&&(r=e.styles),o.createElement(a.Z,{id:e.parentMenu.id,app:n,content:t,height:e.height||"medium",width:e.width||"medium",open:e.parentMenu.state.formOpen,closeButton:!0,closeCallback:this.closeForm,onKeyDown:this.onKeyDown,styles:r,additionalClasses:"p-md-5 "+e.additionalClasses||0})}}])&&c(t.prototype,n),r&&c(t,r),m}(o.Component)},6347:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var o=n(7294),r=n(5697),i=n.n(r);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(d,e);var t,n,r,a,f,h=(a=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(a);if(f){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function d(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=h.call(this,e)).state={},t.onKeyDown=t.onKeyDown.bind(u(t)),e.app.activeModal=u(t),t}return t=d,r=[{key:"propTypes",get:function(){return{app:i().object,open:i().bool,onKeyDown:i().func,closeButton:i().any,content:i().element,closeCallback:i().func,styles:i().object,height:i().string,width:i().string,additionalClasses:i().string,id:i().any}}}],(n=[{key:"onKeyDown",value:function(e){if(this.props.onKeyDown)return this.props.onKeyDown(e)}},{key:"componentDidMount",value:function(){this.modalContainer.focus()}},{key:"componentWillUnmount",value:function(){this.props.app.activeModal=null}},{key:"render",value:function(){var e=this,t=this.props.content,n=this.props,r=n.additionalClasses+" modal-wrapper";n.height&&(r+=" height-"+n.height),n.width&&(r+=" width-"+n.width);var i="";n.closeButton&&(i=o.createElement("a",{className:"close-button button",onClick:n.closeCallback},"X"));var a={};return n.styles&&(a=n.styles),o.createElement("section",{id:n.id||null,ref:function(t){e.modalContainer=t},className:"modal-container "+(n.open?" open":""),onKeyDown:this.onKeyDown},o.createElement("div",{className:"modal-overlay"}),o.createElement("div",{className:r,style:a},i,t))}}])&&s(t.prototype,n),r&&s(t,r),d}(o.Component)}}]);