{"version":3,"sources":["Home.js","App.js","reportWebVitals.js","index.js"],"names":["Home","useOktaAuth","authState","oktaAuth","useState","userInfo","setUserInfo","unregistered","setUnregistered","useEffect","isAuthenticated","token","getUserInfo","then","info","username","requestOptions","method","headers","body","JSON","stringify","userKey","sub","email","fetch","response","json","data","id","user_id","key","invite_available","random_available","login","signInWithRedirect","originalUri","LoginButton","onClick","userText","signOut","className","AuthDomain","config","clientId","issuer","discoveryUri","redirectUri","endSessionRedirectUri","scopes","requireHardwareBackedKeyStore","pkce","OktaAuth","toRelativeUrl","window","location","href","origin","setOriginalUri","App","to","restoreOriginalUri","exact","path","component","LoginCallback","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wQAGO,SAASA,IACf,MAAgCC,cAAxBC,EAAR,EAAQA,UAAWC,EAAnB,EAAmBA,SAChB,EAAkCC,mBAAS,MAA3C,mBAAQC,EAAR,KAAkBC,EAAlB,KACA,EAA0CF,oBAAS,GAAnD,mBAAQG,EAAR,KAAsBC,EAAtB,KA+BH,GA9BAC,qBAAU,WACJP,GAAcA,EAAUQ,gBAI5BP,EAASQ,MAAMC,cAAcC,MAAK,SAAAC,GACjC,IAAKT,IAAaA,EAASU,SAAU,CACpC,IAAMC,EAAiB,CACtBC,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAU,CAAEC,QAASR,EAAKS,IAAKC,MAAOV,EAAKU,SAEvDC,MAAM,8BAA+BT,GACnCH,MAAK,SAAAa,GAAQ,OAAIA,EAASC,UAC1Bd,MAAK,SAAAe,GACLtB,EAAY,CACXkB,MAAOI,EAAKJ,MACZK,GAAID,EAAKE,QACTC,IAAKjB,EAAKS,IACVS,iBAAkBJ,EAAKI,iBACvBC,iBAAkBL,EAAKK,iBACvBlB,SAAUa,EAAKb,WAEhBP,GAAiBoB,EAAKE,gBApB1BxB,EAAY,QAyBX,CAACJ,EAAWC,KAEVD,EACJ,OACC,4DAIF,IAAMgC,EAAQ,kBAAM/B,EAASgC,mBAAmB,CAACC,YAAa,OACxDC,EAAc,WACnB,OAAKnC,EAAUQ,gBAOR,KALL,8BACC,wBAAQ4B,QAASJ,EAAjB,sBAQAK,EAAW,GAgBf,OAbEA,EAFErC,EAAUQ,gBACTH,EACS,8BAAK,yHAETF,EACI,gCAAK,0CAAaA,EAASU,SAAtB,OAAoC,wBAAQuB,QAPhD,WAAQnC,EAASqC,WAOuB,uBAGzC,8BAAK,uDAIN,gCAAK,4EAAkD,cAACH,EAAD,OAG5D,sBAAKI,UAAU,YAAf,UAA2B,qDAA8BF,KChElE,IACMG,EAAa,uBAEbC,EAAS,CACbC,SAAS,GAAD,OAJO,wBAKfC,OAAO,WAAD,OAAaH,EAAb,mBACNI,aAAa,WAAD,OAAaJ,EAAb,mBACZK,YAAa,uCACbC,sBAAuB,+BACvBC,OAAQ,CAAC,SAAU,UAAW,SAC9BC,+BAA+B,EAC/BC,MAAM,GAGFhD,EAAW,IAAIiD,WAAST,GACxBP,EAAciB,wBAAcC,OAAOC,SAASC,KAAMF,OAAOC,SAASE,QACxEtD,EAASuD,eAAetB,GAsBTuB,MApBf,WAIC,OACC,qBAAKlB,UAAU,MAAf,SACC,eAAC,IAAD,WACC,mCACC,2CACA,oBAAIA,UAAU,OAAd,SAAqB,6BAAI,cAAC,IAAD,CAAMmB,GAAG,IAAT,yBAE1B,eAAC,IAAD,CAAUzD,SAAUA,EAAU0D,mBAVN,WAC1BP,OAAOC,SAAS,KASd,UACC,cAAC,IAAD,CAAOO,OAAK,EAACC,KAAK,IAAIC,UAAWhE,IACjC,cAAC,IAAD,CAAO+D,KAAK,kBAAkBC,UAAWC,eC3B/BC,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBvD,MAAK,YAAkD,IAA/CwD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.d8752cf9.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useOktaAuth } from '@okta/okta-react';\n\nexport function Home() {\n\tconst { authState, oktaAuth } = useOktaAuth();\n    const [ userInfo, setUserInfo ] = useState(null);\n    const [ unregistered, setUnregistered ] = useState(false);\n\tuseEffect(() => {\n\t\tif (!authState || !authState.isAuthenticated) {\n\t\t\t// When user isn't authenticated, forget any user info\n\t\t\tsetUserInfo(null);\n\t\t} else {\n\t\t\toktaAuth.token.getUserInfo().then(info => {\n\t\t\t\tif (!userInfo || !userInfo.username) {\n\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\t\theaders: { 'Content-Type': 'application/json' },\n\t\t\t\t\t\tbody: JSON.stringify({ userKey: info.sub, email: info.email })\n\t\t\t\t\t};\n\t\t\t\t\tfetch('http://localhost:3002/login', requestOptions)\n\t\t\t\t\t\t.then(response => response.json())\n\t\t\t\t\t\t.then(data => {\n\t\t\t\t\t\t\tsetUserInfo({\n\t\t\t\t\t\t\t\temail: data.email,\n\t\t\t\t\t\t\t\tid: data.user_id,\n\t\t\t\t\t\t\t\tkey: info.sub,\n\t\t\t\t\t\t\t\tinvite_available: data.invite_available,\n\t\t\t\t\t\t\t\trandom_available: data.random_available,\n\t\t\t\t\t\t\t\tusername: data.username\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetUnregistered(!data.user_id);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, [authState, oktaAuth]); // Update if authState changes\n\n\tif (!authState) {\n\t\treturn (\n\t\t\t<div>Loading authentication...</div>\n\t\t);\n\t}\n\n\tconst login = () => oktaAuth.signInWithRedirect({originalUri: '/'});\n\tconst LoginButton = () => {\n\t\tif (!authState.isAuthenticated) {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<button onClick={login}>Login</button>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\t\treturn null;\n\t}\n\n\tconst logout = () => { oktaAuth.signOut(); }\n\tlet userText = '';\n\tif (authState.isAuthenticated) {\n\t\tif (unregistered) {\n\t\t\tuserText = (<div><p>If you are seeing this, I should really open a modal to create your profile, new user.</p></div>);\n\t\t}\n\t\telse if (userInfo) {\n\t\t\tuserText = (<div><p>Welcome, {userInfo.username}!</p><button onClick={ logout }>Logout</button></div>);\n\t\t}\n\t\telse {\n\t\t\tuserText = (<div><p>Loading user info...</p></div>);\n\t\t}\n\t}\n\telse {\n\t\tuserText = (<div><p>You need to sign in to use the application!</p><LoginButton /></div>);\n\t}\n\t\n\treturn (<div className=\"page-home\"><h1>Welcome to Stratego</h1>{ userText }</div>);\n}","import './App.scss';\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Link } from 'react-router-dom';\nimport { LoginCallback, Security } from '@okta/okta-react';\nimport { OktaAuth } from '@okta/okta-auth-js';\nimport { Home } from './Home';\nimport { toRelativeUrl } from '@okta/okta-auth-js';\n\nconst ClientId = '0oa2t6lqn7Qsg1T3g5d7';\nconst AuthDomain = 'dev-6379228.okta.com';\n\nconst config = {\n  clientId: `${ClientId}`,\n  issuer: `https://${AuthDomain}/oauth2/default`,\n  discoveryUri: `https://${AuthDomain}/oauth2/default`,\n  redirectUri: 'http://localhost:3000/login-callback',\n  endSessionRedirectUri: 'http://localhost:3000/logout',\n  scopes: ['openid', 'profile', 'email'],\n  requireHardwareBackedKeyStore: false,\n  pkce: true\n};\n\nconst oktaAuth = new OktaAuth(config);\nconst originalUri = toRelativeUrl(window.location.href, window.location.origin);\noktaAuth.setOriginalUri(originalUri);\n\nfunction App() {\n\tconst restoreOriginalUri = () => {\n\t\twindow.location='/';\n\t};\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<Router>\n\t\t\t\t<header>\n\t\t\t\t\t<div>Stratego</div>\n\t\t\t\t\t<ul className=\"menu\"><li><Link to=\"/\">Home</Link></li></ul>\n\t\t\t\t</header>\n\t\t\t\t<Security oktaAuth={oktaAuth} restoreOriginalUri={restoreOriginalUri}>\n\t\t\t\t\t<Route exact path='/' component={Home}/>\n\t\t\t\t\t<Route path='/login-callback' component={LoginCallback}/>\n\t\t\t\t</Security>\n\t\t\t</Router>\n\t\t</div>\n\t);\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}